<template name="Dashboard">
	<div class="row justify-content-center">
		<div class="col-12 col-md-10 col-lg-8">
			<!-- Header Section -->
			<div class="text-center mb-4 pt-2">
				<h2 class="fw-bold mb-2">Split Bills</h2>
			</div>

			<!-- Action Buttons -->
			<div class="action-buttons-card">
				<div class="action-buttons-grid">
					<button type="button" class="action-button" id="scanReceiptBtn" data-processing="{{ocrProcessing}}">
						<div class="action-icon">
							<i class="bi bi-camera"></i>
						</div>
						<span class="action-label">Scan Receipt</span>
					</button>

					<button type="button" class="action-button" id="uploadReceiptBtn" data-processing="{{ocrProcessing}}">
						<div class="action-icon">
							<i class="bi bi-upload"></i>
						</div>
						<span class="action-label">Upload Image</span>
					</button>
				</div>

				<button class="manage-people-btn" id="addPeopleBtn">
					<i class="bi bi-people-fill"></i>
					<span>Manage People</span>
				</button>
			</div>

			<input type="file" id="scanFileInput" accept="image/*" capture="environment" class="file-input-hidden">
			<input type="file" id="receiptFileInput" accept="image/*" class="file-input-hidden">

		{{#if ocrProcessing}}
			<div class="alert alert-info mb-4">
				<div class="d-flex align-items-center mb-2">
					<div class="spinner-border spinner-border-sm me-3"></div>
					<span>{{ocrStatus}}</span>
				</div>
				<div class="progress" style="height: 24px;">
					<div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-purple" role="progressbar" style="width: {{ocrProgress}}%" aria-valuenow="{{ocrProgress}}" aria-valuemin="0" aria-valuemax="100">
						{{ocrProgress}}%
					</div>
				</div>
			</div>
		{{/if}}
		{{#if hasRecentBills}}
				<div class="card shadow-sm card-spacing-top">
					<div class="card-header bg-white d-flex justify-content-between align-items-center">
						<h5 class="mb-0"><i class="bi bi-clock-history"></i> Recent Bills</h5>
						<a href="/history" class="btn btn-sm btn-outline-primary">View All</a>
					</div>
					<div class="list-group list-group-flush">
						{{#each recentBills}}
							<a href="/split/{{_id}}" class="list-group-item list-group-item-action">
								<div class="d-flex w-100 justify-content-between align-items-center">
									<div>
										{{#if storeName}}
											<h6 class="mb-1"><i class="bi bi-shop"></i> {{storeName}}</h6>
										{{/if}}
										<div class="h5 mb-1 text-success">${{total}}</div>
										<small class="text-muted"><i class="bi bi-calendar3"></i> {{createdAt}}</small>
									</div>
									<div class="text-end">
										<div class="badge bg-light text-dark mb-1">
											<i class="bi bi-basket"></i> {{itemCount}} items
										</div>
										<div class="badge bg-light text-dark">
											<i class="bi bi-people"></i> {{userCount}} people
										</div>
									</div>
								</div>
							</a>
						{{/each}}
					</div>
				</div>
			{{else}}
				<div class="card shadow-sm text-center py-5 card-spacing-top">
					<div class="card-body">
						<i class="bi bi-receipt empty-state-icon"></i>
						<h5 class="mt-3 mb-2">No Bills Yet</h5>
					</div>
				</div>
			{{/if}}
		</div>
	</div>
</template>