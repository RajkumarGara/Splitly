<template name="BillDetail">
	{{#if bill}}
		<div class="d-flex justify-content-between align-items-center mb-3">
			<div>
				<h2 class="mb-1">Bill Detail</h2>
				<p class="small text-muted mb-0">Updated: {{updatedAt}}</p>
			</div>
			<div>
				<a href="/history" class="btn btn-outline-secondary">
					<i class="bi bi-arrow-left"></i> Back
				</a>
			</div>
		</div>
		
		<div class="row g-3 mb-3">
			<div class="col-md-4">
				<div class="card shadow-sm">
					<div class="card-header bg-primary text-white">
						<i class="bi bi-receipt"></i> Receipt Info
					</div>
					<div class="card-body">
						<div class="mb-2">
							<small class="text-muted">Total Amount</small>
							<h3 class="mb-0">${{grandTotal}}</h3>
						</div>
						<div class="mb-2">
							<small class="text-muted">Items</small>
							<div>{{itemCount}} item(s)</div>
						</div>
						<div>
							<small class="text-muted">People</small>
							<div>{{userCount}} person(s)</div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="col-md-8">
				<div class="card shadow-sm mb-3">
					<div class="card-header bg-white">
						<h5 class="mb-0"><i class="bi bi-people"></i> People</h5>
					</div>
					<ul class="list-group list-group-flush">
						{{#each bill.users}}
							<li class="list-group-item d-flex justify-content-between align-items-center">
								<span>{{name}}</span>
								<span class="badge bg-secondary">ID: {{id}}</span>
							</li>
						{{/each}}
					</ul>
				</div>
			</div>
		</div>
		
		<div class="card shadow-sm mb-3">
			<div class="card-header bg-white">
				<h5 class="mb-0"><i class="bi bi-cart"></i> Items</h5>
			</div>
			<ul class="list-group list-group-flush">
				{{#each bill.items}}
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<div>
							<strong>{{name}}</strong>
							<div class="small text-muted">
								Split: {{splitType}}
								{{#if userIds.length}}
									â€¢ {{userIds.length}} person(s)
								{{/if}}
							</div>
						</div>
						<span class="badge bg-primary rounded-pill">${{price}}</span>
					</li>
				{{/each}}
			</ul>
		</div>
		
		<div class="card shadow-sm mb-3">
			<div class="card-header bg-white">
				<h5 class="mb-0"><i class="bi bi-calculator"></i> Per Person Summary</h5>
			</div>
			<ul class="list-group list-group-flush">
				{{#each perUser}}
					<li class="list-group-item d-flex justify-content-between align-items-center">
						<span>{{name}}</span>
						<span class="fw-bold text-success">${{amount}}</span>
					</li>
				{{/each}}
			</ul>
			{{#if bill.taxAmount}}
				<div class="card-footer bg-light">
					<small class="text-muted"><i class="bi bi-info-circle"></i> Tax (${{bill.taxAmount}}) is split equally among all people</small>
				</div>
			{{/if}}
		</div>
		
		<div class="d-flex gap-2">
			<button class="btn btn-primary" id="editReceiptBtn">
				<i class="bi bi-pencil"></i> Edit Receipt
			</button>
			<button class="btn btn-outline-secondary" id="exportJson">
				<i class="bi bi-download"></i> Export JSON
			</button>
			<button class="btn btn-outline-danger ms-auto" id="deleteReceiptBtn">
				<i class="bi bi-trash"></i> Delete
			</button>
		</div>
	{{else}}
		<div class="text-center py-5">
			<i class="bi bi-exclamation-triangle text-warning" style="font-size: 3rem;"></i>
			<p class="text-muted mt-3">Bill not found.</p>
			<a href="/history" class="btn btn-outline-secondary">
				<i class="bi bi-arrow-left"></i> Back to History
			</a>
		</div>
	{{/if}}
</template>