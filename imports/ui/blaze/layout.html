<template name="MainLayout">
	{{> Alerts}}
	<!-- Top Navigation (desktop/tablet) -->
	<header class="top-nav" role="navigation" aria-label="Primary">
		<nav class="top-nav-inner">
			<ul class="top-nav-list">
				{{#each navItems}}
					<li class="top-nav-item {{isActive path}}">
						<a href="{{path}}" class="top-nav-link">
							<i class="bi {{icon}}" aria-hidden="true"></i>
							<span class="label">{{label}}</span>
						</a>
					</li>
				{{/each}}
			</ul>
		</nav>
	</header>

	<div class="container pb-5 pb-lg-4">
		{{#if notReady}}
			<div class="text-center py-5">
				<div class="spinner-border text-purple" role="status"><span class="visually-hidden">Loading</span></div>
				<div class="mt-3 text-muted">Syncing bills...</div>
			</div>
		{{else}}
			<div class="page-content">
				{{> Template.dynamic template=yield}}
			</div>
		{{/if}}
	</div>

	<!-- Bottom Navigation (mobile only) -->
	<nav class="mobile-nav" role="navigation" aria-label="Primary (mobile)">
		<div class="mobile-nav-container">
			{{#each navItems}}
				<a href="{{path}}" class="mobile-nav-item {{isActive path}}" aria-label="{{label}}">
					<i class="bi {{icon}}" aria-hidden="true"></i>
					<span>{{label}}</span>
				</a>
			{{/each}}
		</div>
	</nav>

	{{> UserModal}}
	{{> ConfirmModal}}
</template>

<template name="Alerts">
	<div class="position-fixed top-0 end-0 p-3 alerts-container">
		{{#each alerts}}
			<div class="alert alert-{{typeClass}} alert-dismissible fade show" role="alert">
				{{msg}}
				<button type="button" class="btn-close" data-id="{{id}}"></button>
			</div>
		{{/each}}
	</div>
</template>

<template name="ConfirmModal">
	<div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="confirmModalLabel">Confirm Action</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<p class="mb-0" id="confirmModalMessage">Are you sure?</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" id="confirmCancelBtn">Cancel</button>
					<button type="button" class="btn btn-danger" id="confirmOkBtn">Yes, Proceed</button>
				</div>
			</div>
		</div>
	</div>
</template>